package com.mytech.apartment.portal.services;

import java.util.List;
import java.util.Optional;
import java.util.stream.Collectors;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;

import com.mytech.apartment.portal.dtos.PaymentMethodDto;
import com.mytech.apartment.portal.mappers.PaymentMethodMapper;
import com.mytech.apartment.portal.models.PaymentMethod;
import com.mytech.apartment.portal.repositories.PaymentMethodRepository;

@Service
public class PaymentMethodService {

    @Autowired
    private PaymentMethodRepository paymentMethodRepository;

    @Autowired
    private PaymentMethodMapper paymentMethodMapper;

    public List<PaymentMethodDto> getAllPaymentMethods() {
        return paymentMethodRepository.findAll().stream()
                .map(paymentMethodMapper::toDto)
                .collect(Collectors.toList());
    }

    public Optional<PaymentMethodDto> getPaymentMethodByCode(String code) {
        return paymentMethodRepository.findById(code).map(paymentMethodMapper::toDto);
    }

    public PaymentMethodDto createPaymentMethod(PaymentMethodDto dto) {
        PaymentMethod entity = paymentMethodMapper.toEntity(dto);
        PaymentMethod savedEntity = paymentMethodRepository.save(entity);
        return paymentMethodMapper.toDto(savedEntity);
    }

    public void deletePaymentMethod(String code) {
        paymentMethodRepository.deleteById(code);
    }
}